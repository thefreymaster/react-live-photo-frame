(this["webpackJsonpreact-live-photo-frame"]=this["webpackJsonpreact-live-photo-frame"]||[]).push([[0],{177:function(e,t,c){},178:function(e,t,c){},213:function(e,t,c){"use strict";c.r(t);var n=c(1),i=c.n(n),a=c(89),o=c.n(a),r=c(61),l=c(231),s=(c(177),c(8)),j=(c(178),c(227)),f=c(232),x=c(16),d=c(226),h=c(139),b=c.n(h),u=function(){return(new Date).getHours()>=6&&(new Date).getHours()<=17},m=c(4),O=function(){var e=u(),t={background:e?"#fff":"#000",center:e?"#000":"#fff",seconds:e?"#000":"#fff",minutes:e?"#000":"#fff",hour:e?"#000":"#fff",tick:e?"#000":"#fff",smallTickWidth:2,largeTickWidth:4,secondHandWidth:3,minuteHandWidth:6,hourHandWidth:8};return Object(m.jsx)(d.a,{initialScale:.9,in:!0,children:Object(m.jsx)(b.a,{theme:t})})},p=c(233),g=c(228),w=c(229),v=c(80),y=c(144),k=c(145),S=c(140),W=i.a.createContext({value:{},socket:{emit:function(e,t){}},device:"frame",setDevice:function(e){}}),C=function(){return i.a.useContext(W)},D=function(e){return Object(m.jsx)(W.Provider,{value:Object(S.a)({},e),children:e.children})},z=function(e){var t=u(),c=C(),n=Object(x.g)(),a=Object(p.a)(),o=a.isOpen,r=a.onToggle,l=function(e){r(),setTimeout((function(){n.push(e)}),500)};return i.a.useLayoutEffect((function(){r()}),[]),null===c.device?Object(m.jsx)(x.a,{to:"/device"}):Object(m.jsx)(d.a,{initialScale:.9,in:o,children:Object(m.jsxs)(j.a,{display:"flex",flexDir:"column",minW:300,children:[Object(m.jsx)(g.a,{color:t?"black":"white",fontSize:"2xl",fontWeight:"900",children:"Controller"}),Object(m.jsx)(g.a,{color:t?"black":"white",marginBottom:4,fontSize:"xs",children:"Change the view on the frame"}),Object(m.jsx)(w.a,{color:"whiteAlpha.300",marginBottom:4}),Object(m.jsxs)(j.a,{flexDir:"row",flexWrap:"wrap",display:"flex",justifyContent:"center",children:[Object(m.jsx)(f.a,{"aria-label":"clock",maxW:"30%",minH:"90px",fontSize:"4xl",onClick:function(){return"controller"===c.device?e.socket.emit("change","clock"):l("/clock")},m:1,colorScheme:"gray",isFullWidth:!0,icon:Object(m.jsx)(v.b,{})}),Object(m.jsx)(f.a,{"aria-label":"clock",maxW:"30%",minH:"90px",fontSize:"4xl",onClick:function(){return"controller"===c.device?e.socket.emit("change","weather"):l("/weather")},m:1,colorScheme:"gray",isFullWidth:!0,icon:Object(m.jsx)(y.a,{})}),Object(m.jsx)(f.a,{"aria-label":"clock",maxW:"30%",minH:"90px",fontSize:"4xl",onClick:function(){return"controller"===c.device?e.socket.emit("change","videos"):l("/videos")},m:1,colorScheme:"gray",isFullWidth:!0,icon:Object(m.jsx)(v.a,{})}),Object(m.jsx)(f.a,{"aria-label":"clock",maxW:"30%",minH:"90px",fontSize:"4xl",onClick:function(){return"controller"===c.device?e.socket.emit("change","digital-clock"):l("/digital-clock")},m:1,colorScheme:"gray",isFullWidth:!0,icon:Object(m.jsx)(k.a,{})})]})]})})},H=c(58),I=c.n(H),T=c(81),F=c(70),L=c.n(F),G=c(82),B=c(234),E=function(){var e=Object(G.useQuery)("videos",(function(){return L.a.get("/api/videos/list").then((function(e){return e.data}))})),t=e.isLoading,c=e.data;return t?Object(m.jsx)(B.a,{size:"xl"}):(console.log(c),Object(m.jsxs)("video",{id:"videoPlayer",autoPlay:!0,controls:!1,width:"100%",loop:!0,muted:!0,playsInline:!0,children:[Object(m.jsx)("source",{src:"/videos/".concat(c[0]),type:"video/mp4"}),"Sorry, your browser doesn't support embedded videos."]}))},M=c(146),P=function(){var e=C(),t=(e.device,e.setDevice),c=Object(x.g)(),n=u();return Object(m.jsxs)(j.a,{color:"white",flexWrap:"wrap",display:"flex",minW:300,flexDir:"column",children:[Object(m.jsx)(g.a,{color:n?"black":"white",fontSize:"2xl",fontWeight:"900",children:"Device"}),Object(m.jsx)(g.a,{color:n?"black":"white",marginBottom:4,fontSize:"xs",children:"Choose if this is the frame or the controller"}),Object(m.jsx)(w.a,{color:"whiteAlpha.300",marginBottom:4}),Object(m.jsx)(f.a,{onClick:function(){t("frame"),localStorage.setItem("device","frame"),c.push("/controller")},fontSize:"6xl",colorScheme:"red","aria-label":"frame",minW:"47%",minH:"240px",m:1,icon:Object(m.jsx)(v.c,{})}),Object(m.jsx)(f.a,{onClick:function(){t("controller"),localStorage.setItem("device","controller"),c.push("/controller")},fontSize:"6xl",colorScheme:"red","aria-label":"controller",minW:"47%",minH:"240px",m:1,icon:Object(m.jsx)(M.a,{})})]})},A=c(147),Q=function(e){var t=u(),c=new Date,n=new Date(e.forcast.dt_txt),i=Math.abs(c.getTime()-n.getTime()),a=e.forcast.main,o=Object(s.a)(e.forcast.weather,1)[0];return console.log(e.forcast),Object(m.jsxs)(j.a,{display:"flex",flexDir:"column",alignItems:"center",padding:"2em",margin:"2em",borderRadius:"1em",children:[Object(m.jsx)("img",{style:{maxWidth:"3em"},alt:"weather icon",src:"https://openweathermap.org/img/wn/".concat(o.icon,"@4x.png")}),Object(m.jsx)(g.a,{fontWeight:"300",fontSize:"4em",color:t?"black":"white",children:a.temp.toFixed(0)}),Object(m.jsxs)(g.a,{fontWeight:"500",fontSize:"1em",color:t?"black":"white",children:["in ",(i/36e5).toFixed(0)," hours"]})]})},q=function(){var e=new Date,t=i.a.useState(e.toLocaleTimeString()),c=Object(s.a)(t,2),n=c[0],a=c[1];return i.a.useLayoutEffect((function(){!function e(){setTimeout((function(){a((new Date).toLocaleTimeString()),e()}),1e3)}()}),[]),Object(m.jsx)(j.a,{children:n})},J=function(){var e=u(),t=i.a.useState({main:{temp:0,humidity:0},name:"",wind:{speed:0,deg:0},weather:[{icon:"",description:"",main:""}]}),c=Object(s.a)(t,2),n=c[0],a=c[1],o=i.a.useState({list:[]}),r=Object(s.a)(o,2),l=r[0],f=r[1],x=i.a.useState(!0),h=Object(s.a)(x,2),b=h[0],O=h[1];i.a.useLayoutEffect((function(){var e=function(){var e=Object(T.a)(I.a.mark((function e(t,c){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("https://api.openweathermap.org/data/2.5/forecast?q=".concat("Cambridge, MA, US","&appid=").concat("c90c2bfaebf59c4f106f209199dce010","&units=imperial"));case 2:n=e.sent,f(n.data),O(!1),console.log(n.data);case 6:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),t=function(){var c=Object(T.a)(I.a.mark((function c(){var n;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,L.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat("Cambridge, MA, US","&appid=").concat("c90c2bfaebf59c4f106f209199dce010","&units=imperial"));case 2:n=c.sent,console.log(n.data),e(n.data.coord.lat,n.data.coord.lon),a(n.data),setTimeout((function(){O(!0),t()}),3e5);case 7:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();t()}),[]);var p=new Date,v=Object(s.a)(n.weather,1)[0];return b?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(B.a,{size:"xl"})}):Object(m.jsx)(d.a,{initialScale:.9,in:!0,children:Object(m.jsxs)(j.a,{display:"flex",flexDir:"column",children:[Object(m.jsxs)(j.a,{display:"flex",flexDir:"row",alignItems:"center",children:[Object(m.jsxs)(j.a,{display:"flex",flexDir:"column",children:[Object(m.jsx)(j.a,{p:2,display:"flex",justifyContent:"flex-start",alignItems:"flex-start",children:Object(m.jsx)(g.a,{lineHeight:"40px",fontWeight:"400",fontSize:"4em",color:e?"black":"white",children:n.name})}),Object(m.jsx)(j.a,{p:2,display:"flex",justifyContent:"flex-start",alignItems:"flex-start",children:Object(m.jsx)(g.a,{lineHeight:"40px",fontWeight:"300",fontSize:"2em",color:e?"black":"white",children:p.toDateString()})}),Object(m.jsx)(j.a,{pl:2,display:"flex",justifyContent:"flex-start",alignItems:"flex-start",children:Object(m.jsx)(g.a,{lineHeight:"30px",fontWeight:"200",fontSize:"1.5em",color:e?"black":"white",children:Object(m.jsx)(q,{})})})]}),Object(m.jsx)(j.a,{flexGrow:1}),Object(m.jsx)(w.a,{orientation:"vertical"}),Object(m.jsx)(j.a,{flexGrow:1}),Object(m.jsx)(j.a,{children:Object(m.jsx)(j.a,{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",children:Object(m.jsx)("img",{alt:"weather icon",src:"https://openweathermap.org/img/wn/".concat(v.icon,"@4x.png")})})})]}),Object(m.jsx)(w.a,{mt:5,mb:5,opacity:e?.5:.1}),Object(m.jsxs)(j.a,{display:"flex",flexDir:"row",children:[Object(m.jsxs)(j.a,{pt:5,display:"flex",justifyContent:"flex-start",alignItems:"flex-start",flexDir:"column",children:[Object(m.jsxs)(g.a,{lineHeight:"0.9em",fontWeight:"100",fontSize:"14em",color:e?"black":"white",children:[n.main.temp.toFixed(0),"\xb0"]}),Object(m.jsxs)(g.a,{fontWeight:"100",fontSize:"2em",color:e?"black":"white",children:[v.main,", ",v.description]})]}),Object(m.jsx)(j.a,{flexGrow:1}),Object(m.jsx)(w.a,{orientation:"vertical"}),Object(m.jsx)(j.a,{flexGrow:1}),Object(m.jsxs)(j.a,{display:"flex",justifyContent:"flex-end",alignItems:"center",flexDir:"column",children:[Object(m.jsx)(A.a,{color:e?"black":"white",fontSize:"72px",style:{transform:"rotate(".concat(n.wind.deg,"deg)"),transition:"transform 1250ms ease-in-out"}}),Object(m.jsxs)(g.a,{lineHeight:"60px",fontWeight:"200",fontSize:"3em",color:e?"black":"white",children:[n.wind.speed,"mph"]}),Object(m.jsx)(g.a,{fontWeight:"100",fontSize:"2em",color:e?"black":"white",children:"Wind Direction"})]}),Object(m.jsx)(j.a,{flexGrow:1})]}),Object(m.jsx)(w.a,{mt:12,opacity:e?.5:.1}),Object(m.jsx)(j.a,{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",flexDir:"row",width:"100%",children:l.list.map((function(e,t){return t<4?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(j.a,{flexGrow:1}),Object(m.jsx)(Q,{forcast:e}),Object(m.jsx)(j.a,{flexGrow:1})]}):null}))})]})})},R=c(230),U=function(){var e=new Date,t=i.a.useState(e.toLocaleTimeString()),c=Object(s.a)(t,2),n=c[0],a=c[1];return i.a.useLayoutEffect((function(){!function e(){setTimeout((function(){a((new Date).toLocaleTimeString()),e()}),1e3)}()}),[]),Object(m.jsx)(R.a,{in:!0,children:Object(m.jsx)(j.a,{children:Object(m.jsx)(g.a,{fontSize:"8em",children:n})})})},_=function(e){return Object(m.jsxs)(x.d,{children:[Object(m.jsx)(x.b,{path:"/weather",children:Object(m.jsx)(J,{})}),Object(m.jsx)(x.b,{path:"/clock",children:Object(m.jsx)(O,{})}),Object(m.jsx)(x.b,{path:"/digital-clock",children:Object(m.jsx)(U,{})}),Object(m.jsx)(x.b,{path:"/videos",children:Object(m.jsx)(E,{})}),Object(m.jsx)(x.b,{path:"/controller",children:Object(m.jsx)(z,{socket:e.socket})}),Object(m.jsx)(x.b,{path:"/device",children:Object(m.jsx)(P,{})}),Object(m.jsx)(x.b,{path:"/*",children:Object(m.jsx)(x.a,{to:"/controller"})})]})},K=c(151),N=c(112),V=c(155),X=Object(V.a)("http://192.168.124.124:4000"),Y=function(){var e=u(),t=Object(x.g)(),c=i.a.useState(localStorage.getItem("device")),n=Object(s.a)(c,2),a=n[0],o=n[1];return i.a.useEffect((function(){X.on("change_view",(function(e){console.log(e),"frame"===a&&function(e){switch(e){case"videos":t.push("/videos");break;case"weather":t.push("/weather");break;case"clock":t.push("/clock")}}(e)}))}),[]),Object(m.jsx)(D,{socket:X,device:a,setDevice:o,children:Object(m.jsxs)(j.a,{height:window.innerHeight,width:window.innerWidth,display:"flex",alignItems:N.isMobile?"flex-start":"center",justifyContent:"center",style:{backgroundColor:e?"#fff":"#000"},pt:N.isMobile&&8,children:[Object(m.jsx)(_,{socket:X,device:a}),Object(m.jsx)(r.b,{to:"/controller",children:Object(m.jsx)(f.a,{colorScheme:"gray",size:"lg",icon:Object(m.jsx)(K.a,{}),style:{position:"fixed",bottom:0,right:0,borderRadius:"5px 0px 0px",minHeight:70,minWidth:70}})})]})})},Z=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,235)).then((function(t){var c=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;c(e),n(e),i(e),a(e),o(e)}))},$=new G.QueryClient;o.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(G.QueryClientProvider,{client:$,children:Object(m.jsx)(l.a,{children:Object(m.jsx)(r.a,{children:Object(m.jsx)(Y,{})})})})}),document.getElementById("root")),Z()}},[[213,1,2]]]);
//# sourceMappingURL=main.b422128b.chunk.js.map